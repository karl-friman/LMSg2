@model DashboardStudentModulesViewModel


<div class="card border-secondary mb-3 student-dashboard-day-card">
    <div class="card-header">
        <h4>Course Modules</h4>
    </div>
    @foreach (var module in Model.Modules)
    {
        var progress = (int)((DateTime.Now - module.StartDate).TotalDays / (module.EndDate - module.StartDate).TotalDays);
        if (progress < 1)
        {
            progress = 1;
        }
        string progressWidth = progress.ToString() + "%";
        if (module.StartDate < DateTime.Now && module.EndDate < DateTime.Now)
        {
            <div class="card-body text-muted">
                <div>
                    <span class="card-title text-muted"><small>@module.Name</small></span><br/>
                    <small class="font-italic">Finished on @module.EndDate.ToString("dddd, dd MMMM yyyy")</small>
                </div>
                <div class="progress mb-3">
                    <div class="progress-bar progress-bar bg-success" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
                </div>
                <hr>
            </div>
        }
        if (module.StartDate < DateTime.Now && module.EndDate > DateTime.Now)
        {
            <div class="card-body">
                <div>
                    <h6 class="card-title text-warning">@module.Name</h6>
                </div>
                <div class="progress mb-3">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="@progress" aria-valuemin="0" aria-valuemax="100" style="width: @progressWidth;"></div>
                </div>
                <p class="card-text">
                <span class="text-muted font-italic"><small>Ends on @module.EndDate.ToString("dddd, dd MMMM yyyy")</small></span>
                @module.Description
                </p>
                <hr>
            </div>
        }
        if (module.StartDate > DateTime.Now && module.EndDate > DateTime.Now)
        {
            <div class="card-body">
                <div>
                    <h6 class="card-title text-secondary">@module.Name</h6>
                </div>
                <p class="card-text">
                <div class="text-muted font-italic"><small>Starts on @module.EndDate.ToString("dddd, dd MMMM yyyy")</small></div>
                @module.Description
                </p>
                <hr>
            </div>
        }
    }
</div>
